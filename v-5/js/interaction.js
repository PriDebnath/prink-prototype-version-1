canvas.addEventListener('pointerdown', onPointerDown);
canvas.addEventListener('pointermove', onPointerMove);
canvas.addEventListener('pointerup', onPointerUp);

function onPointerDown(ev) { /* split from your big code */ }
function onPointerMove(ev) { /* split */ }
function onPointerUp(ev) { /* split */ }
